<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Hello from Electron renderer!</title>
    <style>
        html {
            background: #253238;
            color: #fff;
            margin: 0;
            padding: 0;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: Roboto, system-ui, sans-serif;
        }
        .link-list {
            list-style-type: none;
        }
        .link-list li {
            margin-top: 6px;
        }
        .link-list li a {
            color: white;
            text-decoration: none;
            font-size: medium;
        }
        .link-list li span {
            color: gray;
            font-size: small;
        }

        .submit-form {
            margin: 10px 0 0 10px;
        }
    </style>
</head>
<body>
<div class="submit-form">
    <form>
        <input id="bookmarkUrl" type="text" placeholder="Bookmark URL" autofocus />
        <button type="submit" >Add</button>
    </form>
</div>
<ul id="bookmarks" class="link-list">
</ul>

<script>
    const { ipcRenderer } = require('electron');
    document.querySelector('form').addEventListener('submit', (event) => {
        event.preventDefault();
        ipcRenderer.send('bookmark:submit', document.querySelector('#bookmarkUrl').value);
    })
    
    ipcRenderer.on('bookmarks:fetched', (event, bookmarks) => {
        const list = document.querySelector('#bookmarks');
        bookmarks.forEach(({title, href}) => {
            const li = document.createElement('li');

            const div1 = document.createElement('div')
            const a = document.createElement('a');
            a.setAttribute('href', href);
            a.innerText = title;
            div1.appendChild(a);
            li.appendChild(div1);

            const div2 = document.createElement('div');
            div2.setAttribute('class', 'gray');
            const span = document.createElement('span');
            span.innerText = href;
            div2.appendChild(span);
            li.appendChild(div2);

            list.appendChild(li);
        });
    });

    ipcRenderer.on('bookmarks:fetched', (event, bookmarks) => {
        document.querySelector('#bookmarkUrl').focus();
    });
</script>
</body>
</html>
